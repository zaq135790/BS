# admin-service äº‘å‡½æ•°äº‘ç«¯æµ‹è¯•ç”¨ä¾‹

## ğŸ“‹ æµ‹è¯•è¯´æ˜

åœ¨è…¾è®¯äº‘å¼€å‘å¹³å°æ§åˆ¶å°æµ‹è¯•äº‘å‡½æ•°æ—¶ï¼Œä½¿ç”¨ä»¥ä¸‹ JSON æ ¼å¼çš„æµ‹è¯•å‚æ•°ã€‚

**æµ‹è¯•æ–¹å¼**ï¼š
1. ç™»å½•è…¾è®¯äº‘æ§åˆ¶å°
2. è¿›å…¥äº‘å¼€å‘ â†’ äº‘å‡½æ•°
3. æ‰¾åˆ° `admin-service` äº‘å‡½æ•°
4. ç‚¹å‡»"æµ‹è¯•"æŒ‰é’®
5. é€‰æ‹©"è‡ªå®šä¹‰æµ‹è¯•äº‹ä»¶"æˆ–"åœ¨çº¿ç¼–è¾‘"
6. è¾“å…¥ä»¥ä¸‹æµ‹è¯•ç”¨ä¾‹çš„ JSON æ•°æ®
7. ç‚¹å‡»"æµ‹è¯•"æ‰§è¡Œ

---

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

### 1. æ³¨å†ŒåŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ 1.1ï¼šæ­£å¸¸æ³¨å†Œ

```json
{
  "action": "register",
  "data": {
    "username": "testuser001",
    "password": "123456",
    "confirmPassword": "123456",
    "nickname": "æµ‹è¯•ç”¨æˆ·"
  }
}
```

**é¢„æœŸç»“æœ**ï¼š
```json
{
  "success": true,
  "message": "æ³¨å†ŒæˆåŠŸï¼Œè¯·ç™»å½•",
  "data": {
    "id": 2,
    "username": "testuser001"
  }
}
```

#### æµ‹è¯•ç”¨ä¾‹ 1.2ï¼šç”¨æˆ·åå·²å­˜åœ¨

```json
{
  "action": "register",
  "data": {
    "username": "admin",
    "password": "123456",
    "confirmPassword": "123456",
    "nickname": "æµ‹è¯•"
  }
}
```

**é¢„æœŸç»“æœ**ï¼š
```json
{
  "success": false,
  "message": "ç”¨æˆ·åå·²å­˜åœ¨"
}
```

#### æµ‹è¯•ç”¨ä¾‹ 1.3ï¼šå¯†ç é•¿åº¦ä¸è¶³

```json
{
  "action": "register",
  "data": {
    "username": "testuser002",
    "password": "12345",
    "confirmPassword": "12345",
    "nickname": "æµ‹è¯•"
  }
}
```

**é¢„æœŸç»“æœ**ï¼š
```json
{
  "success": false,
  "message": "å¯†ç é•¿åº¦ä¸èƒ½å°‘äº6ä½"
}
```

#### æµ‹è¯•ç”¨ä¾‹ 1.4ï¼šå¯†ç ä¸ä¸€è‡´

```json
{
  "action": "register",
  "data": {
    "username": "testuser003",
    "password": "123456",
    "confirmPassword": "654321",
    "nickname": "æµ‹è¯•"
  }
}
```

**é¢„æœŸç»“æœ**ï¼š
```json
{
  "success": false,
  "message": "ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"
}
```

---

### 2. ç™»å½•åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ 2.1ï¼šæ­£å¸¸ç™»å½•ï¼ˆé»˜è®¤ç®¡ç†å‘˜ï¼‰

```json
{
  "action": "login",
  "data": {
    "username": "admin",
    "password": "admin123456"
  }
}
```

**é¢„æœŸç»“æœ**ï¼š
```json
{
  "success": true,
  "data": {
    "token": "ç”Ÿæˆçš„tokenå­—ç¬¦ä¸²",
    "expireTime": 1234567890123,
    "adminInfo": {
      "id": 1,
      "username": "admin",
      "nickname": "è¶…çº§ç®¡ç†å‘˜",
      "role": "super_admin"
    }
  }
}
```

#### æµ‹è¯•ç”¨ä¾‹ 2.2ï¼šä½¿ç”¨æ³¨å†Œçš„è´¦å·ç™»å½•

```json
{
  "action": "login",
  "data": {
    "username": "testuser001",
    "password": "123456"
  }
}
```

**é¢„æœŸç»“æœ**ï¼š
```json
{
  "success": true,
  "data": {
    "token": "ç”Ÿæˆçš„tokenå­—ç¬¦ä¸²",
    "expireTime": 1234567890123,
    "adminInfo": {
      "id": 2,
      "username": "testuser001",
      "nickname": "æµ‹è¯•ç”¨æˆ·",
      "role": "editor"
    }
  }
}
```

#### æµ‹è¯•ç”¨ä¾‹ 2.3ï¼šç”¨æˆ·åæˆ–å¯†ç é”™è¯¯

```json
{
  "action": "login",
  "data": {
    "username": "admin",
    "password": "wrongpassword"
  }
}
```

**é¢„æœŸç»“æœ**ï¼š
```json
{
  "success": false,
  "message": "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"
}
```

#### æµ‹è¯•ç”¨ä¾‹ 2.4ï¼šç”¨æˆ·åæˆ–å¯†ç ä¸ºç©º

```json
{
  "action": "login",
  "data": {
    "username": "",
    "password": ""
  }
}
```

**é¢„æœŸç»“æœ**ï¼š
```json
{
  "success": false,
  "message": "ç”¨æˆ·åå’Œå¯†ç ä¸èƒ½ä¸ºç©º"
}
```

---

### 3. è·å–ç®¡ç†å‘˜ä¿¡æ¯æµ‹è¯•

**æ³¨æ„**ï¼šéœ€è¦å…ˆç™»å½•è·å– tokenï¼Œç„¶åä½¿ç”¨è¯¥ token è¿›è¡Œæµ‹è¯•ã€‚

#### æµ‹è¯•ç”¨ä¾‹ 3.1ï¼šæ­£å¸¸è·å–ä¿¡æ¯

```json
{
  "action": "getProfile",
  "data": {
    "token": "ä»ç™»å½•æ¥å£è·å–çš„token"
  }
}
```

**é¢„æœŸç»“æœ**ï¼š
```json
{
  "success": true,
  "data": {
    "id": 1,
    "username": "admin",
    "nickname": "è¶…çº§ç®¡ç†å‘˜",
    "role": "super_admin"
  }
}
```

#### æµ‹è¯•ç”¨ä¾‹ 3.2ï¼šToken æ— æ•ˆ

```json
{
  "action": "getProfile",
  "data": {
    "token": "invalid_token"
  }
}
```

**é¢„æœŸç»“æœ**ï¼š
```json
{
  "success": false,
  "message": "Invalid or expired token"
}
```

---

### 4. ç™»å‡ºåŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ 4.1ï¼šæ­£å¸¸ç™»å‡º

```json
{
  "action": "logout",
  "data": {
    "token": "ä»ç™»å½•æ¥å£è·å–çš„token"
  }
}
```

**é¢„æœŸç»“æœ**ï¼š
```json
{
  "success": true
}
```

---

### 5. ä»ªè¡¨ç›˜ç»Ÿè®¡æ•°æ®æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ 5.1ï¼šè·å–ç»Ÿè®¡æ•°æ®

```json
{
  "action": "getDashboardStats",
  "data": {
    "token": "ä»ç™»å½•æ¥å£è·å–çš„token"
  }
}
```

**é¢„æœŸç»“æœ**ï¼š
```json
{
  "success": true,
  "data": {
    "totalUsers": 100,
    "totalInsects": 50,
    "totalPosts": 200,
    "totalVideos": 30,
    "userTrend": [
      {
        "date": "2025-12-07",
        "count": 10
      },
      {
        "date": "2025-12-08",
        "count": 15
      }
    ]
  }
}
```

---

### 6. æ˜†è™«ç®¡ç†åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ 6.1ï¼šè·å–æ˜†è™«åˆ—è¡¨

```json
{
  "action": "getInsectList",
  "data": {
    "token": "ä»ç™»å½•æ¥å£è·å–çš„token",
    "page": 1,
    "pageSize": 10,
    "keyword": "",
    "type": "",
    "status": ""
  }
}
```

**é¢„æœŸç»“æœ**ï¼š
```json
{
  "success": true,
  "data": {
    "list": [
      {
        "id": 1,
        "name": "è´è¶",
        "alias": "butterfly",
        "type": "insect",
        "description": "ç¾ä¸½çš„æ˜†è™«",
        "status": "published",
        "sort": 0
      }
    ],
    "pagination": {
      "total": 50,
      "page": 1,
      "pageSize": 10,
      "totalPages": 5
    }
  }
}
```

#### æµ‹è¯•ç”¨ä¾‹ 6.2ï¼šè·å–æ˜†è™«è¯¦æƒ…

```json
{
  "action": "getInsectDetail",
  "data": {
    "token": "ä»ç™»å½•æ¥å£è·å–çš„token",
    "id": 1
  }
}
```

**é¢„æœŸç»“æœ**ï¼š
```json
{
  "success": true,
  "data": {
    "id": 1,
    "name": "è´è¶",
    "alias": "butterfly",
    "type": "insect",
    "description": "ç¾ä¸½çš„æ˜†è™«",
    "status": "published",
    "sort": 0
  }
}
```

#### æµ‹è¯•ç”¨ä¾‹ 6.3ï¼šåˆ é™¤æ˜†è™«ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰

```json
{
  "action": "deleteInsect",
  "data": {
    "token": "ä»ç™»å½•æ¥å£è·å–çš„tokenï¼ˆéœ€è¦adminæˆ–super_adminè§’è‰²ï¼‰",
    "id": 1
  }
}
```

**é¢„æœŸç»“æœ**ï¼š
```json
{
  "success": true
}
```

---

## ğŸ”„ å®Œæ•´æµ‹è¯•æµç¨‹

### æ­¥éª¤ 1ï¼šæ³¨å†Œæ–°ç”¨æˆ·

```json
{
  "action": "register",
  "data": {
    "username": "testuser",
    "password": "123456",
    "confirmPassword": "123456",
    "nickname": "æµ‹è¯•ç”¨æˆ·"
  }
}
```

**ä¿å­˜è¿”å›çš„ token**ï¼ˆå¦‚æœæœ‰ï¼‰æˆ–è¿›è¡Œä¸‹ä¸€æ­¥ç™»å½•ã€‚

### æ­¥éª¤ 2ï¼šç™»å½•è·å– Token

```json
{
  "action": "login",
  "data": {
    "username": "testuser",
    "password": "123456"
  }
}
```

**å¤åˆ¶è¿”å›çš„ token å€¼**ï¼Œç”¨äºåç»­æµ‹è¯•ã€‚

### æ­¥éª¤ 3ï¼šä½¿ç”¨ Token æµ‹è¯•å…¶ä»–åŠŸèƒ½

å°†æ­¥éª¤ 2 è·å–çš„ token æ›¿æ¢åˆ°ä»¥ä¸‹æµ‹è¯•ç”¨ä¾‹ä¸­ï¼š

```json
{
  "action": "getProfile",
  "data": {
    "token": "ç²˜è´´æ­¥éª¤2è·å–çš„token"
  }
}
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **Token æœ‰æ•ˆæœŸ**ï¼šToken æœ‰æ•ˆæœŸä¸º 7 å¤©ï¼Œè¿‡æœŸåéœ€è¦é‡æ–°ç™»å½•
2. **æƒé™è¯´æ˜**ï¼š
   - `super_admin`ï¼šè¶…çº§ç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™
   - `admin`ï¼šç®¡ç†å‘˜ï¼Œæ‹¥æœ‰å¤§éƒ¨åˆ†æƒé™
   - `editor`ï¼šç¼–è¾‘è€…ï¼Œåªèƒ½æŸ¥çœ‹å’Œç¼–è¾‘ï¼Œä¸èƒ½åˆ é™¤
3. **æµ‹è¯•é¡ºåº**ï¼šå»ºè®®æŒ‰ç…§ æ³¨å†Œ â†’ ç™»å½• â†’ å…¶ä»–åŠŸèƒ½ çš„é¡ºåºæµ‹è¯•
4. **æ•°æ®åº“è¿æ¥**ï¼šç¡®ä¿æ•°æ®åº“è¿æ¥é…ç½®æ­£ç¡®ï¼Œå¦åˆ™æµ‹è¯•ä¼šå¤±è´¥
5. **è¡¨åˆå§‹åŒ–**ï¼šé¦–æ¬¡æµ‹è¯•æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®è¡¨å’Œé»˜è®¤ç®¡ç†å‘˜è´¦å·

---

## ğŸ› å¸¸è§é”™è¯¯

### é”™è¯¯ 1ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š
```json
{
  "success": false,
  "message": "è¿æ¥æ•°æ®åº“å¤±è´¥"
}
```

**è§£å†³æ–¹æ³•**ï¼š
- æ£€æŸ¥æ•°æ®åº“è¿æ¥é…ç½®ï¼ˆhost, port, user, passwordï¼‰
- ç¡®è®¤æ•°æ®åº“æœåŠ¡æ­£å¸¸è¿è¡Œ
- æ£€æŸ¥ç½‘ç»œè¿æ¥

### é”™è¯¯ 2ï¼šToken æ— æ•ˆ

**é”™è¯¯ä¿¡æ¯**ï¼š
```json
{
  "success": false,
  "message": "Invalid or expired token"
}
```

**è§£å†³æ–¹æ³•**ï¼š
- é‡æ–°ç™»å½•è·å–æ–°çš„ token
- æ£€æŸ¥ token æ˜¯å¦æ­£ç¡®å¤åˆ¶

### é”™è¯¯ 3ï¼šæƒé™ä¸è¶³

**é”™è¯¯ä¿¡æ¯**ï¼š
```json
{
  "success": false,
  "message": "æ— æƒé™æ‰§è¡Œæ­¤æ“ä½œ"
}
```

**è§£å†³æ–¹æ³•**ï¼š
- ä½¿ç”¨ `admin` æˆ– `super_admin` è§’è‰²çš„è´¦å·
- æ£€æŸ¥è´¦å·çš„è§’è‰²è®¾ç½®

---

## ğŸ“ æµ‹è¯•è®°å½•æ¨¡æ¿

| æµ‹è¯•ç”¨ä¾‹ | æµ‹è¯•æ—¶é—´ | æµ‹è¯•ç»“æœ | å¤‡æ³¨ |
|---------|---------|---------|------|
| æ³¨å†Œ-æ­£å¸¸ | 2025-12-13 | âœ… é€šè¿‡ | |
| æ³¨å†Œ-ç”¨æˆ·åå·²å­˜åœ¨ | 2025-12-13 | âœ… é€šè¿‡ | |
| ç™»å½•-æ­£å¸¸ | 2025-12-13 | âœ… é€šè¿‡ | |
| ç™»å½•-å¯†ç é”™è¯¯ | 2025-12-13 | âœ… é€šè¿‡ | |
| è·å–ä¿¡æ¯ | 2025-12-13 | âœ… é€šè¿‡ | |
| ç™»å‡º | 2025-12-13 | âœ… é€šè¿‡ | |

---

**æœ€åæ›´æ–°**ï¼š2025-12-13


