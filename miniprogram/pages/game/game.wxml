<view class="container">
  <!-- èƒŒæ™¯å›¾ç‰‡ -->
  <image class="background-image" src="cloud://cloud1-5g6ssvupb26437e4.636c-cloud1-5g6ssvupb26437e4-1382475723/image/bj1.jpg" mode="aspectFill"></image>
  <!-- æ¸¸æˆæ ‡é¢˜ -->
  <view class="page-title">äº’åŠ¨æ¸¸æˆ</view>

  <!-- ä¸¤ä¸ªä¸»è¦æ¸¸æˆ -->
  <view class="game-grid">
    <view class="game-card" bindtap="startJudgeGame">
      <image src="cloud://cloud1-5g6ssvupb26437e4.636c-cloud1-5g6ssvupb26437e4-1382475723/image/game11.jpg" class="game-icon" />
      <view class="game-info">
        <text class="game-name">ç›Šå®³å°åˆ¤å®˜</text>
        <text class="game-desc">åˆ¤æ–­æ˜†è™«æ˜¯ç›Šè™«è¿˜æ˜¯å®³è™«</text>
      </view>
    </view>
    <view class="game-card" bindtap="startPuzzleGame">
      <image src="cloud://cloud1-5g6ssvupb26437e4.636c-cloud1-5g6ssvupb26437e4-1382475723/image/game22.jpg" class="game-icon" />
      <view class="game-info">
        <text class="game-name">è™«è™«æ‹¼å›¾</text>
        <text class="game-desc">å®Œæˆæ˜†è™«å›¾ç‰‡æ‹¼å›¾æŒ‘æˆ˜</text>
      </view>
    </view>
  </view>

  <!-- æ¸¸æˆç»Ÿè®¡ -->
  <view class="stats-section">
    <view class="stats-title">æ¸¸æˆç»Ÿè®¡</view>
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-number">{{stats[gameType].totalGames}}</text>
        <text class="stat-label">{{gameType === 'judge' ? 'åˆ¤å®˜æ¸¸æˆæ¬¡æ•°' : 'æ‹¼å›¾å®Œæˆæ¬¡æ•°'}}</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{stats[gameType].correctRate}}%</text>
        <text class="stat-label">{{gameType === 'judge' ? 'åˆ¤é¢˜æ­£ç¡®ç‡' : 'æ‹¼å›¾å®Œæˆç‡'}}</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{stats[gameType].bestScore}}</text>
        <text class="stat-label">è¯¥æ¸¸æˆæœ€é«˜åˆ†</text>
      </view>
    </view>
     
     <!-- ç»Ÿè®¡åˆ‡æ¢æŒ‰é’®ï¼šåœ¨è¿™é‡Œåˆ‡æ¢æŸ¥çœ‹ä¸¤ç§æ¸¸æˆçš„ç»Ÿè®¡ -->
     <view class="game-tabs stats-tabs">
       <button class="tab-btn {{gameType === 'judge' ? 'active' : ''}}" bindtap="switchGameType" data-type="judge">
         ç›Šå®³å°åˆ¤å®˜
       </button>
       <button class="tab-btn {{gameType === 'puzzle' ? 'active' : ''}}" bindtap="switchGameType" data-type="puzzle">
         è™«è™«æ‹¼å›¾
       </button>
     </view>
  </view>

  <!-- æ¸¸æˆè®°å½• -->
  <view class="records-section">
    <view class="records-title">
      <text>æ¸¸æˆè®°å½•</text>
      <view class="refresh-icon {{refreshing ? 'rotating' : ''}}" bindtap="manualRefresh">
        <text class="refresh-icon-text">ğŸ”„</text>
      </view>
    </view>
    
    <!-- è®°å½•åˆ—è¡¨ -->
    <view wx:if="{{loading}}" class="loading">
      <text>åŠ è½½ä¸­...</text>
    </view>
    
    <view wx:elif="{{gameRecords.judge.length === 0 && gameRecords.puzzle.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ®</text>
      <text class="empty-text">è¿˜æ²¡æœ‰æ¸¸æˆè®°å½•ï¼Œå¿«å»ç©æ¸¸æˆå§ï¼</text>
    </view>
    
    <view wx:else>
      <view wx:for="{{gameRecords[gameType]}}" wx:key="id" class="record-item" bindtap="viewGameRecord" data-id="{{item.id}}" data-game-type="{{item.game_type}}">
        <view class="record-info">
          <text class="record-game">{{item.game_type}}</text>
          <text class="record-time">{{item.formattedTime}}</text>
        </view>
        <view class="record-score">{{item.score}}åˆ†</view>
      </view>
    </view>
  </view>
</view>
