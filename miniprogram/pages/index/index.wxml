<view class="container">
  <!-- 搜索框 -->
  <view class="search-box">
    <view class="search-input">
      <icon type="search" size="16" color="#999"></icon>
      <input placeholder="搜索昆虫名称..." placeholder-class="placeholder-style" value="{{searchKeyword}}" bindinput="onSearchInput" />
    </view>
    <!-- 搜索结果 -->
    <view class="search-results" wx:if="{{showSearchResults && searchResults.length > 0}}">
      <view class="search-result-item" wx:for="{{searchResults}}" wx:key="id" bindtap="selectSearchResult" data-index="{{index}}">
        <text class="result-name">{{item.name}}</text>
        <text class="result-type">{{item.type}}</text>
      </view>
    </view>
    <view class="search-results empty" wx:if="{{showSearchResults && searchResults.length === 0}}">
      <text>没有找到相关昆虫</text>
    </view>
  </view>

  <!-- AI 助手 -->
  <ai-assistant></ai-assistant>

  <!-- 轮播图 -->
  <view class="swiper-container">
    <swiper indicator-dots="{{true}}" autoplay="{{true}}" interval="3000" duration="500" circular="{{true}}">
      <block wx:for="{{swiperList}}" wx:key="id">
        <swiper-item>
          <image src="{{item.image}}" mode="widthFix" class="swiper-image" catchtap="onSwiperTap" />
        </swiper-item>
      </block>
    </swiper>
  </view>

  <!-- 功能入口 -->
  <view class="features">
    <view class="feature-item" bindtap="goToCategory">
      <image src="/images/icons/book.png" class="feature-icon" />
      <text>虫虫图鉴</text>
    </view>
    <view class="feature-item" bindtap="goToGame">
      <image src="/images/icons/game.png" class="feature-icon" />
      <text>趣味小游戏</text>
    </view>
    <view class="feature-item" bindtap="goToTheater">
      <image src="/images/icons/video.png" class="feature-icon" />
      <text>虫虫剧场</text>
    </view>
    <view class="feature-item" bindtap="goToPosts">
      <image src="/images/icons/post.png" class="feature-icon" />
      <text>畅所欲言</text>
    </view>
    <view class="feature-item" bindtap="goToKnowledgeBase">
      <image src="/images/icons/book.png" class="feature-icon" />
      <text>科普知识库</text>
    </view>
  </view>

  <!-- 精选昆虫 -->
  <view class="section">
    <view class="section-title">
      <text>精选昆虫</text>
      <view class="more" bindtap="refreshFeaturedInsects">换一换</view>
    </view>
    <view class="insect-list">
      <block wx:for="{{featuredInsects}}" wx:key="id">
        <view class="insect-item-row" bindtap="goToDetail" data-index="{{index}}">
          <image src="{{item.image}}" class="insect-img" mode="aspectFill" />
          <view class="insect-info">
            <text class="insect-name">{{item.name}}</text>
            <text class="insect-desc">{{item.childDesc}}</text>
          </view>
        </view>
      </block>
    </view>
  </view>
</view>
