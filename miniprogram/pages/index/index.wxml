<view class="container">
  <!-- 背景图片 -->
  <image class="background-image" src="cloud://cloud1-5g6ssvupb26437e4.636c-cloud1-5g6ssvupb26437e4-1382475723/image/bj1.jpg" mode="aspectFill"></image>
  <!-- 搜索框 -->
  <view class="search-box">
    <view class="search-input" bindtap="goToSearch">
      <icon type="search" size="16" color="#999"></icon>
      <text class="search-placeholder">搜索昆虫名称...</text>
    </view>
  </view>

  <!-- AI 助手 -->
  <ai-assistant></ai-assistant>

  <!-- 轮播图 -->
  <view class="swiper-container">
    <swiper indicator-dots="{{true}}" autoplay="{{true}}" interval="3000" duration="500" circular="{{true}}">
      <block wx:for="{{swiperList}}" wx:key="id">
        <swiper-item>
          <image src="{{item.image}}" mode="aspectFit" class="swiper-image" catchtap="onSwiperTap" />
        </swiper-item>
      </block>
    </swiper>
  </view>

  <!-- 功能入口 -->
  <view class="features">
    <!-- 通用功能（儿童和家长都有） -->
    <view class="feature-item" bindtap="goToCategory">
      <image src="/images/tabbar/book_selected.png" class="feature-icon" />
      <text>虫虫图鉴</text>
    </view>
    <view class="feature-item" bindtap="goToGame">
      <image src="/images/tabbar/game_selected.png" class="feature-icon" />
      <text>趣味小游戏</text>
    </view>
    <view class="feature-item" bindtap="goToTheater">
      <image src="/images/tabbar/video_selected.png" class="feature-icon" />
      <text>虫虫剧场</text>
    </view>
    <view class="feature-item" bindtap="goToPosts">
      <image src="/images/tabbar/speak.png" class="feature-icon" />
      <text>畅所欲言</text>
    </view>
    <!-- 科普知识库和昆虫识别（所有身份都显示） -->
    <view class="feature-item" bindtap="goToKnowledgeBase">
      <image src="/images/tabbar/zlk.png" class="feature-icon" />
      <text>科普知识库</text>
    </view>
    <view class="feature-item" bindtap="goToInsectRecognition">
      <image src="/images/tabbar/shibie.png" class="feature-icon" />
      <text>昆虫识别</text>
    </view>
  </view>

  <!-- 精选昆虫 -->
  <view class="section">
    <view class="section-title">
      <text>精选昆虫</text>
      <view class="more" bindtap="refreshFeaturedInsects">换一换</view>
    </view>
    <view class="insect-list">
      <block wx:for="{{featuredInsects}}" wx:key="id">
        <view class="insect-item-row" bindtap="goToDetail" data-index="{{index}}">
          <image src="{{item.image}}" class="insect-img" mode="aspectFill" />
          <view class="insect-info">
            <text class="insect-name">{{item.name}}</text>
            <text class="insect-desc">{{item.childDesc}}</text>
          </view>
        </view>
      </block>
    </view>
  </view>
</view>