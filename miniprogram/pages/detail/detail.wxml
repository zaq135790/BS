<view class="container">
  <!-- å„¿ç«¥èº«ä»½ï¼šé¡¶éƒ¨åŠ¨ç”»è§†é¢‘/å›¾ç‰‡ -->
  <view wx:if="{{userRole === 'child'}}" class="video-container">
    <video 
      wx:if="{{videoUrl}}"
      src="{{videoUrl}}" 
      controls 
      class="main-video"
      show-center-play-btn="{{true}}"
      enable-play-gesture="{{true}}"
    ></video>
    <!-- å„¿ç«¥èº«ä»½ï¼šæ˜¾ç¤ºå°é¢å›¾ç‰‡ -->
    <image 
      wx:else
      src="{{insectData.image || 'cloud://cloud1-5g6ssvupb26437e4.636c-cloud1-5g6ssvupb26437e4-1382475723/images/bj3.png'}}" 
      class="main-image"
      mode="aspectFill"
    ></image>
  </view>

  <!-- è¯¦æƒ…å†…å®¹ -->
  <view class="content">
    <view class="title">{{insectData.name}}</view>
    <view class="type-badge">{{insectData.type}}</view>
    
    <!-- å®¶é•¿èº«ä»½ï¼šç§‘æ™®çŸ¥è¯† -->
    <block wx:if="{{userRole === 'parent'}}">
      <!-- è¯†åˆ«è¦ç‚¹ -->
      <view class="info-section identify-section">
        <view class="section-title">ğŸ” è¯†åˆ«è¦ç‚¹</view>
        <!-- ä¸‰å¼ ç…§ç‰‡è½®æ’­å›¾ï¼ˆæ”¾åœ¨è¯†åˆ«è¦ç‚¹æ–‡å­—ä¸Šé¢ï¼‰ -->
        <view class="gallery-wrapper" wx:if="{{insectData.galleryImages && insectData.galleryImages.length > 0}}">
          <swiper 
            indicator-dots="{{true}}" 
            autoplay="{{false}}" 
            interval="3000" 
            duration="500" 
            circular="{{false}}"
            class="detail-gallery-swiper"
          >
            <block wx:for="{{insectData.galleryImages}}" wx:key="index">
              <swiper-item>
                <image 
                  src="{{item}}" 
                  class="detail-gallery-image" 
                  mode="aspectFill"
                  bindtap="previewImage"
                  data-src="{{item}}"
                  data-urls="{{insectData.galleryImages}}"
                ></image>
              </swiper-item>
            </block>
          </swiper>
        </view>
        <view class="section-content identify-content">
          <text class="identify-text">{{insectData.identify}}</text>
        </view>
      </view>

      <!-- å®¶åº­æŒ‡å¼• -->
      <view class="info-section guide-section">
        <view class="section-title">ğŸ’¡ å®¶åº­æŒ‡å¼•</view>
        <view class="section-content guide-content">
          <text class="guide-text">{{insectData.guide}}</text>
        </view>
      </view>
    </block>

    <!-- å„¿ç«¥èº«ä»½ï¼šæ˜†è™«å£è¯€å’ŒçŸ¥è¯† -->
    <block wx:else>
      <!-- æ˜†è™«å£è¯€ -->
      <view class="info-section rhyme-section">
        <view class="section-title">ğŸ“ æ˜†è™«å£è¯€</view>
        <view class="section-content rhyme-content">
          <text class="rhyme-text">{{insectData.rhyme}}</text>
        </view>
      </view>

      <!-- æ˜†è™«å°çŸ¥è¯† -->
      <view class="info-section knowledge-section">
        <view class="section-title">ğŸ’¡ æ˜†è™«å°çŸ¥è¯†</view>
        <view class="section-content knowledge-content">
          <text class="knowledge-text">{{insectData.knowledge}}</text>
          <button class="audio-btn {{isReading ? 'playing' : ''}}" bindtap="onToggleRead">
            {{ isReading ? 'æš‚åœæœ—è¯»' : 'æœ—è¯»å°çŸ¥è¯†' }}
          </button>
        </view>
      </view>
    </block>
  </view>
</view>
